/*
============================================================
--- THE DEFINITIVE STYLESHEET (ALL FEATURES & FIXES) ---
============================================================
*/

/* --- All Previous Styles (Minified for length) --- */
:root{--theme-pink:#ffc2d1;--theme-dark-pink:#ff8fab;--theme-cream:#fffbeB;--theme-text:#8c505f}body,html{margin:0;padding:0;font-family:'Nunito',sans-serif;background-color:#ffe5ec;overflow-x:hidden;scroll-behavior:smooth}.falling-petals{position:fixed;top:0;left:0;width:100%;height:100vh;background-image:url('https://www.transparenttextures.com/patterns/subtle-petals.png');animation:fall 30s linear infinite;z-index:-1}@keyframes fall{from{background-position:0 0}to{background-position:0 1000px}}.floral-corner{position:fixed;width:200px;height:200px;background-image:url('https://i.pinimg.com/originals/a8/5a/23/a85a2337d47e8523b0365771510e6879.png');background-size:contain;background-repeat:no-repeat;z-index:100}.top-left{top:-20px;left:-20px}.top-right{top:-20px;right:-20px;transform:scaleX(-1)}#hero{height:100vh;position:relative;display:flex;align-items:center;justify-content:center;overflow:hidden}.back-video{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);min-width:100%;min-height:100%;width:auto;height:auto;z-index:1;filter:brightness(.7)}.hero-content{position:relative;z-index:2;text-align:center}.main-title{font-family:'Dancing Script',cursive;font-size:5rem;color:var(--theme-cream);text-shadow:0 0 15px var(--theme-dark-pink),0 0 25px var(--theme-dark-pink)}.music-player{position:fixed;bottom:25px;right:25px;z-index:1001}#play-pause-btn{background:var(--theme-dark-pink);border:2px solid var(--theme-cream);color:var(--theme-cream);width:50px;height:50px;border-radius:50%;font-size:1.5rem;cursor:pointer;box-shadow:0 0 20px rgba(255,143,171,.8);transition:all .3s ease}#play-pause-btn:hover{transform:scale(1.1)}#letter-section{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:50px 20px;background:radial-gradient(circle,#fff0f3 0%,#ffe5ec 100%);position:relative;overflow:hidden}#letter-section::before,#letter-section::after{content:'';position:absolute;bottom:0;width:250px;height:350px;background-image:url('https://i.pinimg.com/originals/3c/81/70/3c8170857522521c769532854973307b.png');background-size:contain;background-repeat:no-repeat;opacity:.6;z-index:1}#letter-section::before{left:20px}#letter-section::after{right:20px;transform:scaleX(-1)}.letter-container{position:relative;z-index:10;width:350px;height:250px;cursor:pointer;perspective:1000px}.envelope{position:absolute;width:100%;height:100%}.envelope-flap{position:absolute;width:100%;height:100%;background:#f8b195;clip-path:polygon(0 0,100% 0,50% 50%);z-index:3;transition:transform .6s ease;transform-origin:top}.envelope-body{position:absolute;width:100%;height:100%;background:#f67280;z-index:1;border-radius:5px}.wax-seal{position:absolute;width:50px;height:50px;background:#c06c84;border-radius:50%;top:40%;left:50%;transform:translateX(-50%);z-index:4;display:flex;align-items:center;justify-content:center;font-size:1.5rem;color:#ffb3c6;transition:opacity .3s ease}.letter{position:absolute;top:0;left:5%;width:90%;background:var(--theme-cream);padding:25px;border-radius:5px;box-sizing:border-box;box-shadow:0 5px 20px rgba(0,0,0,.2);transform:translateY(100%) rotateX(-90deg);opacity:0;visibility:hidden;transform-origin:top;z-index:2;transition:transform .6s .3s ease,opacity .6s .3s ease,visibility .6s .3s ease}.letter h3{font-family:'Dancing Script',cursive;font-size:1.8rem;margin-top:0;color:#c06c84}.letter p{font-size:1rem;line-height:1.6;color:var(--theme-text)}.letter .signature{text-align:right;font-family:'Dancing Script',cursive;font-size:1.5rem}.special-one-btn{display:inline-block;margin-top:15px;padding:10px 20px;background:var(--theme-dark-pink);color:#fff;text-decoration:none;border-radius:20px;transition:background-color .3s}.letter-container.open .wax-seal{opacity:0}.letter-container.open .envelope-flap{transform:rotateX(180deg)}.letter-container.open .letter{transform:translateY(5px) rotateX(0deg);opacity:1;visibility:visible}#timer-section{padding:100px 20px;display:flex;justify-content:center;align-items:center;background:#ffe5ec}.timer-container{background:rgba(255,255,255,.7);padding:40px;border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,.1);border:2px solid var(--theme-pink);text-align:center;max-width:600px;width:100%;box-sizing:border-box}.timer-container h2{font-family:'Dancing Script',cursive;font-size:2.8rem;color:var(--theme-text);margin-top:0}.milestones{list-style:none;padding:0;margin:20px 0;color:var(--theme-text);font-size:1.1rem}.milestones li{margin-bottom:10px}.milestones span{font-weight:700}.countdown-title{font-size:1.5rem;color:var(--theme-text);margin-top:30px}#countdown{display:flex;justify-content:center;gap:20px;margin-top:15px}.time-unit{background:var(--theme-pink);padding:15px;border-radius:10px;min-width:80px;box-shadow:0 5px 10px rgba(0,0,0,.1)}.time-unit span{display:block;font-size:2.5rem;font-weight:700;color:#fff}.time-unit small{font-size:.9rem;color:#fffafb}#typing-text{font-family:'Dancing Script',cursive;font-size:1.5rem;color:var(--theme-text);margin:30px auto 20px;overflow:hidden;white-space:nowrap;width:0;animation:typing 4s steps(60,end) forwards;animation-delay:1s;border-right:3px solid var(--theme-text)}@keyframes typing{from{width:0}to{width:100%}}.romantic-button{display:inline-block;padding:12px 25px;margin-top:20px;background:var(--theme-dark-pink);color:#fff;border-radius:30px;text-decoration:none;transition:all .3s ease;box-shadow:0 4px 15px rgba(0,0,0,.2)}.romantic-button:hover{transform:scale(1.05);box-shadow:0 6px 20px rgba(0,0,0,.3)}#stars-section{min-height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;background:radial-gradient(ellipse at bottom,#1B2735 0%,#090A0F 100%);position:relative;overflow:hidden;padding:40px 20px;box-sizing:border-box}#stars-section h2{font-family:'Dancing Script',cursive;font-size:2.5rem;color:var(--theme-cream);text-shadow:0 0 10px var(--theme-pink);z-index:10;position:relative;text-align:center;margin-bottom:50px}@keyframes move-twink-back{from{background-position:0 0}to{background-position:-10000px 5000px}}#stars-bg,#stars-bg2,#stars-bg3{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;display:block;z-index:1}#stars-bg{background:url(https://www.transparenttextures.com/patterns/stardust.png) repeat top center;animation:move-twink-back 200s linear infinite}#stars-bg2{background:url(https://www.transparenttextures.com/patterns/stardust.png) repeat top center;animation:move-twink-back 150s linear infinite}#stars-bg3{background:url(https://www.transparenttextures.com/patterns/stardust.png) repeat top center;animation:move-twink-back 100s linear infinite}.interactive-star{position:absolute;width:15px;height:15px;background-color:#fff;border-radius:50%;box-shadow:0 0 10px #fff,0 0 20px #fff,0 0 30px var(--theme-pink);cursor:pointer;z-index:5;transition:transform .3s ease;animation:glow-pulse 3s infinite ease-in-out}.interactive-star:hover{transform:scale(1.3)}@keyframes glow-pulse{0%,100%{box-shadow:0 0 10px #fff,0 0 20px #fff,0 0 30px var(--theme-pink);opacity:1}50%{box-shadow:0 0 5px #fff,0 0 10px #fff,0 0 15px var(--theme-pink);opacity:.7}}.star-1{top:20%;left:15%}.star-2{top:40%;left:80%}.star-3{top:75%;left:25%}.star-4{top:60%;left:55%}.star-5{top:85%;left:90%}.star-6{top:15%;left:50%}.star-7{top:30%;left:30%}.star-8{top:55%;left:10%}.star-9{top:80%;left:65%}.star-10{top:10%;left:85%}.star-11{top:90%;left:45%}.star-12{top:45%;left:40%}#picture-section{padding:100px 20px;background:#fff0f3;text-align:center}.picture-container h3{font-family:'Dancing Script',cursive;font-size:2.5rem;color:var(--theme-text)}#memory-pic{max-width:90%;width:350px;border-radius:15px;border:10px solid #fff;box-shadow:0 10px 30px rgba(0,0,0,.2);transform:rotate(-3deg);cursor:pointer;transition:all .4s ease}#memory-pic:hover{transform:rotate(0) scale(1.05);box-shadow:0 15px 40px rgba(0,0,0,.3)}.picture-container p{font-style:italic;color:#aaa}#moon-section{min-height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;background:radial-gradient(ellipse at bottom,#1B2735 0%,#090A0F 100%);position:relative;overflow:hidden}#moon-section h3,#moon-section h2{font-family:'Dancing Script',cursive;font-size:2.5rem;color:var(--theme-cream);text-shadow:0 0 15px #fff;z-index:10}#romantic-moon{width:200px;height:200px;border-radius:50%;background-color:#f7f3e1;cursor:pointer;position:relative;box-shadow:0 0 30px #fff,0 0 50px #fff,0 0 70px #f0e68c,inset 0 0 20px #d2c8a0;animation:moon-glow 4s infinite alternate ease-in-out;transition:transform .4s ease;margin:40px 0}#romantic-moon:hover{transform:scale(1.1)}@keyframes moon-glow{from{box-shadow:0 0 30px #fff,0 0 50px #fff,0 0 70px #f0e68c,inset 0 0 20px #d2c8a0}to{box-shadow:0 0 40px #fff,0 0 60px #fff,0 0 90px #f0e68c,inset 0 0 20px #d2c8a0}}#counter-section{padding:100px 20px;text-align:center;background:#fff0f3}#love-counter-btn{font-family:'Dancing Script',cursive;font-size:1.8rem;padding:15px 30px;border:none;border-radius:50px;cursor:pointer;background:var(--theme-dark-pink);color:#fff;box-shadow:0 5px 20px rgba(0,0,0,.2);transition:all .3s ease}#love-counter-btn:hover{transform:scale(1.05)}#love-counter-display{margin-top:20px;font-size:5rem;font-weight:700;color:var(--theme-text);text-shadow:2px 2px 5px rgba(0,0,0,.1);letter-spacing:2px}.hidden{display:none}

/* --- Butterfly Section (FIXED & REDESIGNED) --- */
#butterfly-section {
    min-height: 100vh; display: flex; justify-content: center; align-items: center;
    background: radial-gradient(circle, #fbc2eb 0%, #a6c1ee 100%);
    position: relative; overflow: hidden;
}
.butterfly-container {
    position: relative; width: 100%; height: 100%;
    display: flex; justify-content: center; align-items: center;
    cursor: pointer;
}
/* FIX: Message now has a high z-index to ensure it appears on top */
#final-message {
    text-align: center; color: white; z-index: 10;
    font-family: 'Dancing Script', cursive;
    opacity: 0; visibility: hidden; transition: all 1s 1.5s ease;
    transform: scale(0.8);
}
/* This class will be added by JavaScript to show the message */
#final-message.visible {
    opacity: 1; visibility: visible; transform: scale(1);
}
#final-message h2 { font-size: 3rem; text-shadow: 2px 2px 5px rgba(0,0,0,0.3); }
#final-message p { font-size: 1.5rem; max-width: 500px; margin: 0 auto; text-shadow: 1px 1px 3px rgba(0,0,0,0.3); }

/* REDESIGN: More realistic butterfly */
.butterfly {
    position: absolute;
    perspective: 500px;
    z-index: 20; /* Butterflies must be on top of the message initially */
    animation: bob 4s infinite ease-in-out;
}
.butterfly::before, .butterfly::after { /* These are the two wings */
    content: ''; position: absolute;
    width: 30px; height: 50px;
    background: radial-gradient(circle at 100% 0%, #ffefba, #ffafbd);
    border-radius: 50% 10% 10% 50%;
}
.butterfly::before { /* Left wing */
    transform-origin: right;
    animation: flap-left 1s infinite alternate ease-in-out;
}
.butterfly::after { /* Right wing */
    left: 30px;
    transform-origin: left;
    animation: flap-right 1s infinite alternate ease-in-out;
}
@keyframes bob { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(20px); } }
@keyframes flap-left { 0%, 100% { transform: rotateY(80deg); } 50% { transform: rotateY(10deg); } }
@keyframes flap-right { 0%, 100% { transform: rotateY(-80deg); } 50% { transform: rotateY(-10deg); } }
.butterfly.fly-away { animation: fly-away 2s ease-in-out forwards, bob 4s forwards; }
@keyframes fly-away { 0% { opacity: 1; } 100% { transform: translate(var(--x, 0), var(--y, 0)) scale(0); opacity: 0; } }
/* Positions */
.b1{top:40%;left:45%}.b2{top:50%;left:50%}.b3{top:60%;left:40%}.b4{top:45%;left:35%}.b5{top:55%;left:55%}.b6{top:35%;left:55%}.b7{top:65%;left:50%}.b8{top:50%;left:30%}.b9{top:40%;left:60%}.b10{top:60%;left:60%}.b11{top:30%;left:40%}.b12{top:70%;left:45%}

/* --- Final Proposal Section --- */
#proposal-section {
    min-height: 100vh; display: flex; justify-content: center; align-items: center;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    text-align: center; padding: 20px; position: relative; overflow: hidden;
}
#final-question {
    font-family: 'Dancing Script', cursive; font-size: 3rem;
    color: var(--theme-text); text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
    transition: opacity 0.5s ease;
}
.buttons-container { margin-top: 30px; transition: opacity 0.5s ease; }
#yes-btn, #no-btn {
    font-family: 'Nunito', sans-serif; font-weight: 700; font-size: 1.5rem;
    padding: 15px 40px; margin: 0 15px; border: none; border-radius: 50px;
    cursor: pointer; transition: all 0.3s ease;
}
#yes-btn { background: #4caf50; color: white; box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4); }
#yes-btn:hover { transform: scale(1.1); }
#no-btn { background: #f44336; color: white; box-shadow: 0 5px 15px rgba(244, 67, 54, 0.4); }
#balloon-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
.balloon {
    position: absolute; width: 60px; height: 75px;
    background-color: var(--theme-dark-pink);
    border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
    bottom: -100px;
    animation: fly-up 8s ease-in-out infinite;
    opacity: 0.8;
}
.balloon::after { content: ''; position: absolute; top: 75px; left: 50%; width: 1px; height: 100px; background-color: #aaa; }
@keyframes fly-up { 0% { transform: translateY(0) rotate(0); } 100% { transform: translateY(-120vh) rotate(360deg); } }
#sad-emoji-container { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); pointer-events: none; }
.sad-emoji { font-size: 4rem; opacity: 0; animation: pop-fade 1.5s ease; }
@keyframes pop-fade { 0% { transform: scale(0.5); opacity: 0; } 50% { opacity: 1; } 100% { transform: scale(1.5); opacity: 0; } }

/* --- Modals & Mobile (Minified for length) --- */
.modal{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.7);display:flex;justify-content:center;align-items:center;z-index:2000;opacity:1;visibility:visible;transition:opacity .4s ease,visibility .4s ease}.modal.modal-hidden{opacity:0;visibility:hidden}.modal-content{background-color:var(--theme-cream);color:var(--theme-text);padding:30px 40px;border-radius:15px;max-width:500px;width:80%;text-align:center;position:relative;font-family:'Dancing Script',cursive;transform:scale(1);transition:transform .4s ease}.modal.modal-hidden .modal-content{transform:scale(.8)}.modal-close-btn{position:absolute;top:10px;right:15px;font-size:2rem;font-family:'Nunito',sans-serif;color:#aaa;cursor:pointer;transition:color .3s ease}.modal-close-btn:hover{color:var(--theme-text)}.picture-modal-content{border:5px solid var(--theme-pink);font-size:1.5rem}.moon-modal-content{background-color:#1a222c;color:var(--theme-cream);border:3px solid #f0e68c;font-size:1.5rem;line-height:1.6}@media(max-width:768px){.main-title{font-size:3rem}.floral-corner{width:100px;height:100px;top:-10px}.top-left{left:-10px}.top-right{right:-10px}#letter-section::before,#letter-section::after{width:150px;height:210px;opacity:.4}#letter-section::before{left:-15px}#letter-section::after{right:-15px}.letter-container{transform:scale(.9)}#timer-section{padding:50px 15px}.timer-container{padding:25px}.timer-container h2{font-size:2rem}#countdown{gap:10px;flex-wrap:wrap}.time-unit{padding:10px;min-width:70px}.time-unit span{font-size:2rem}#typing-text{font-size:1.2rem}#stars-section h2{font-size:1.8rem;margin-bottom:10vh}.interactive-star{width:12px;height:12px}.star-1{top:15%;left:10%}.star-2{top:30%;left:85%}.star-3{top:70%;left:15%}.star-4{top:50%;left:50%}.star-5{top:85%;left:80%}.star-6{top:10%;left:40%}.star-7{top:35%;left:30%}.star-8{top:60%;left:8%}.star-9{top:80%;left:60%}.star-10{top:8%;left:75%}.star-11{top:92%;left:35%}.star-12{top:55%;left:35%}.modal-content{font-size:1rem}#picture-section{padding:80px 15px}#memory-pic{width:280px}#moon-section h3,#moon-section h2{font-size:1.8rem}#romantic-moon{width:150px;height:150px}#love-counter-display{font-size:3rem}#final-message h2{font-size:2rem}#final-message p{font-size:1.2rem}#final-question{font-size:2rem}#yes-btn,#no-btn{font-size:1.2rem;padding:12px 30px}}
